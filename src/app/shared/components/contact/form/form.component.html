<div class="form-container">

    <form (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">

        <fieldset>        

            <input class="name-mail-input" #name="ngModel" minlength="2" [(ngModel)]="contactData.name" type="text" name="name" id="name" placeholder="Your name" onfocus="this.placeholder=''" required>

            <legend>
                @if (this.generalService.currentLanguage == 'de') {
                    Ihr Name
                }
                @if (this.generalService.currentLanguage == 'en') {
                    Your name
                }
            </legend>

            @if (!name.valid && name.touched && !name.disabled) {
                <span class="notification">
                    @if (this.generalService.currentLanguage == 'de') {
                        Bitte geben Sie Ihren Namen ein.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Please enter your name.
                    }
                </span>
                <img class="notification-img" src="./../../../../../assets/img/message-error.svg">
            }
            @if (name.valid) {
                <img class="notification-img" src="./../../../../../assets/img/message-ok.svg">
            }

        </fieldset>

        <fieldset>

            <input class="name-mail-input" #email="ngModel" [(ngModel)]="contactData.email" type="email" name="email" id="email" placeholder="Your email" onfocus="this.placeholder=''" required pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}">

            <legend>
                @if (this.generalService.currentLanguage == 'de') {
                    Ihre E-Mail-Adresse
                }
                @if (this.generalService.currentLanguage == 'en') {
                    Your email
                }
            </legend>

            @if (!email.valid && email.touched && !email.disabled) {
                <span class="notification">
                    @if (this.generalService.currentLanguage == 'de') {
                        Bitte geben Sie Ihre E-Mail-Adresse ein.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Please enter your email.
                    }
                </span>
                <img class="notification-img" src="./../../../../../assets/img/message-error.svg">
            }
            @if (email.valid) {
                <img class="notification-img" src="./../../../../../assets/img/message-ok.svg">
            }

        </fieldset>

        <fieldset>

            <textarea #message="ngModel" minlength="20" [(ngModel)]="contactData.message" name="message" id="message" placeholder="Your message" onfocus="this.placeholder=''" required></textarea>

            <legend>
                @if (this.generalService.currentLanguage == 'de') {
                    Ihre Nachricht
                }
                @if (this.generalService.currentLanguage == 'en') {
                    Your message
                }                
            </legend>

            @if (!message.valid && message.touched && !message.disabled) {
                <span class="notification">
                    @if (this.generalService.currentLanguage == 'de') {
                        Bitte geben Sie eine Nachricht ein (mindestens 20 Zeichen erforderlich).
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Please enter a message (at least 20 characters required).
                    }
                </span>
                <img class="notification-img-message" src="./../../../../../assets/img/message-error.svg">
            }
            @if (message.valid) {
                <img class="notification-img-message" src="./../../../../../assets/img/message-ok.svg">
            }

        </fieldset>

        <div class="privacy-container">

            <div class="privacy-check-container">

                <input #privacy="ngModel" [(ngModel)]="contactData.checkbox" type="checkbox" id="privacy" name="privacy" required>

                <label for="privacy">
                    @if (this.generalService.currentLanguage == 'de') {
                        Ich habe die
                        <div class="privacy-policy-german">
                            <a routerLink="privacy-policy" routerLinkActive="active">Datenschutzerklärung</a>
                        </div>
                        gelesen und bin mit der dementsprechenden Verarbeitung meiner Daten einverstanden.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        I've read the
                        <div>
                            <a routerLink="privacy-policy" routerLinkActive="active">privacy policy</a>
                        </div>
                        and agree to the processing of my data as outlined.
                    }
                </label>

            </div>

            @if (!privacy.valid && privacy.touched && !privacy.disabled) {
                <span class="notification privacy-notification">
                    @if (this.generalService.currentLanguage == 'de') {
                        Bitte lesen Sie die Datenschutzerklärung.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Please accept the privacy policy.
                    }
                </span>
            }

        </div>

        <div class="send-container">
            <input class="btn-send" type="submit" value="{{this.generalService.btnText}}">
            @if (mailSent) {
                <div class="sent-notification">
                    @if (this.generalService.currentLanguage == 'de') {
                        Danke für Ihre Nachricht.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Thank you for your message.
                    }
                </div>
            }
            @if (mailError) {
                <div class="sent-notification color-red">
                    @if (this.generalService.currentLanguage == 'de') {
                        Ihre Nachricht konnte nicht gesendet werden.
                    }
                    @if (this.generalService.currentLanguage == 'en') {
                        Your message could not be sent.
                    }
                </div>
            }  
        </div>

    </form>

</div>